<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terminal Input with Emoji Autocomplete</title>
    
    <!-- xterm.js for Terminal UI -->
    <link rel="stylesheet" href="https://unpkg.com/xterm/css/xterm.css" />
    <script src="https://unpkg.com/xterm/lib/xterm.js"></script>

    <!-- Tribute.js for Autocompletion -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tributejs@5.1.3/dist/tribute.css">
    <script src="https://cdn.jsdelivr.net/npm/tributejs@5.1.3/dist/tribute.min.js"></script>

    <style>
        body {
            background-color: black;
            color: limegreen;
            font-family: monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            justify-content: center;
        }
        #terminal-container {
            width: 600px;
            height: 300px;
            border: 2px solid limegreen;
        }
        #input-container {
            margin-top: 10px;
        }

    </style>
</head>
<body>

    <div id="terminal-container"></div>

    <script>
        // Initialize xterm.js terminal
        const term = new Terminal({
            cursorBlink: true,
            rows: 15,
            cols: 80,
        });

        term.open(document.getElementById('terminal-container'));

        // Fake bash-like prompt
        const username = "user";
        const hostname = "bushido";
        const prompt = () => `\x1b[32m${username}@${hostname}\x1b[0m:\x1b[34m~\x1b[0m$ `;
        term.writeln("Welcome to the Bushido Terminal");
        term.write(prompt());
        // Handle input form
        let commandBuffer = "";

        term.onData(e => {
            if (e === '\r') {  // Enter key
                term.writeln(""); // New line
                executeCommand(commandBuffer);
                commandBuffer = "";
                term.write(prompt());
            } else if (e === '\x7F') {  // Backspace key
                if (commandBuffer.length > 0) {
                    commandBuffer = commandBuffer.slice(0, -1);
                    term.write('\b \b'); // Move back, erase character
                }
            } else {
                commandBuffer += e;
                term.write(e);
            }
        });

        function executeCommand(command) {
            if (command.trim() === "clear") {
                term.clear();
            } else if (command.trim() === "help") {
                term.writeln("Available commands: help, clear, echo [text]");
            } else if (command.startsWith("echo ")) {
                term.writeln(command.slice(5));
            } else {
                term.writeln(`bash: ${command}: command not found`);
            }
        }
        // Emoji autocomplete setup using Tribute.js
        var tribute = new Tribute({
            trigger: ":",
            values: [
                { key: "smile", value: "üòä" },
                { key: "fire", value: "üî•" },
                { key: "thumbs_up", value: "üëç" },
                { key: "star", value: "‚≠ê" },
                { key: "check", value: "‚úîÔ∏è" },
                { key: "coffee", value: "‚òï" }
            ],
            selectTemplate: function (item) {
                return item.original.value;
            }
        });

        tribute.attach(term);
    </script>

</body>
</html>